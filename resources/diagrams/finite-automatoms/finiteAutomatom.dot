digraph DFA {
    // Layout general
    rankdir = LR;
    splines = true;
    overlap = false;
    nodesep = 0.4;
    ranksep = 0.6;
    
    // Estados normales
    node [shape = circle; style = filled;];
    
    // Estado de aceptación
    // Se definen varios para que el autómata quede más claro.
    // Todos referencian al mismo estado de aceptación.
    // ACEPTACIÓN DE IDENTIFICADORES, PALABRAS RESERVADAS Y CADENAS.
    fI [shape = doublecircle;style = dashed;color = "#8a048a"; label = "F";];
    fR [shape = doublecircle;style = dashed;color = "#8a048a"; label = "F";];
    fS [shape = doublecircle;style = dashed;color = "#8a048a"; label = "F";];
    // ACEPTACIÓN DE NÚMEROS.
    // Separados en varios por orden.
    fN1 [shape = doublecircle;style = dashed;color = "#8a048a"; label = "F";];
    fN2 [shape = doublecircle;style = dashed;color = "#8a048a"; label = "F";];
    fN3 [shape = doublecircle;style = dashed;color = "#8a048a"; label = "F";];
    fN4 [shape = doublecircle;style = dashed;color = "#8a048a"; label = "F";];
    // ACEPTACIÓN DE OPERADORES.
    // Separados en varios por orden.
    fP1 [shape = doublecircle;style = dashed;color = "#8a048a"; label = "F";];
    fP2 [shape = doublecircle;style = dashed;color = "#8a048a"; label = "F";];
    fP3 [shape = doublecircle;style = dashed;color = "#8a048a"; label = "F";];
    fP4 [shape = doublecircle;style = dashed;color = "#8a048a"; label = "F";];
    fP5 [shape = doublecircle;style = dashed;color = "#8a048a"; label = "F";];
    
    // Estados de error.
    // Se definen varios para que el autómata quede más claro.
    // Todos referencias al mismo estado de error o estado sumidero.
    // ERROR GENERAL.
    eG [shape = doublecircle;style = dashed;color = red;label = "e";];
    // ERROR DE COMENTARIO.
    eC [shape = doublecircle;style = dashed;color = red;label = "e";];
    // ERROR DE OPERADOR.
    eP [shape = doublecircle;style = dashed;color = red;label = "e";];
    // ERROR DE NÚMERO.
    // Separados en varios por orden.
    eN1 [shape = doublecircle;style = dashed;color = red;label = "e";];
    eN2 [shape = doublecircle;style = dashed;color = red;label = "e";];
    eN3 [shape = doublecircle;style = dashed;color = red;label = "e";];
    eN4 [shape = doublecircle;style = dashed;color = red;label = "e";];
    // ERROR DE CADENA.
    eS [shape = doublecircle;style = dashed;color = red;label = "e";];
    
    // -----------------------------
    // Agrupación inicial
    subgraph cluster_inicio {
        label = "Bloque inicial";
        style = dashed;
        fillcolor = lightgrey;
        0;
    }
    
    // Agrupación numérica
    subgraph cluster_num {
        label = "Números";
        style = dashed;
        fillcolor = "#f2f2f2";
        node [fillcolor = lightblue;];
        1;
        2;
        3;
        4;
        5;
        6;
        7;
    }
    
    // Agrupación literales
    subgraph cluster_lit {
        label = "Letras y cadenas";
        style = dashed;
        node [fillcolor = lightyellow;];
        8;
        9;
        10;
    }
    
    // Agrupación operadores
    subgraph cluster_ops {
        label = "Operadores";
        style = dashed;
        node [fillcolor = lightpink;];
        11;
        12;
        13;
        14;
    }
    
    // Agrupación comentarios
    subgraph cluster_coment {
        label = "Comentarios";
        style = dashed;
        node [fillcolor = "#b4e7b4";];
        15;
        16;
        17;
    }
    
    0 -> 0 [label = "s, t, n [NLD]";];
    0 -> 10 [label = "L | LI";];
    0 -> 11 [label = "\":\" | LI";];
    0 -> 12 [label = "\"=\" | LI";];
    0 -> 13 [label = "\"-\" | LI";];
    0 -> 14 [label = "\">\", \"<\" | LI";];
    0 -> 15 [label = "\"#\"";];
    0 -> 1 [label = "d | LI";];
    0 -> 3 [label = "\".\" | LI";];
    0 -> 8 [label = "\" | LI";];
    0 -> 9 [label = "l | LI";];
    0 -> eG [label = "Otro | -1"; style = dashed;];
    0 -> fP1 [label = "P | LI, FTF";];
    1 -> 1 [label = "d | LA";];
    1 -> 2 [label = "\"U\" | LA";];
    1 -> 4 [label = "\".\" | LA";];
    1 -> eN1 [label = "Otro | -2"; style = dashed;];
    2 -> eN2 [label = "Otro | -3"; style = dashed;];
    2 -> fN1 [label = "\"I\" | LA, UIC, VTF";];
    3 -> 4 [label = "d | LA";];
    3 -> fN2 [label = "Otro | FTF, RCE";];
    4 -> 4 [label = "d | LA";];
    4 -> 5 [label = "\"F\" | LA";];
    4 -> fN3 [label = "Otro | FC, VTF, RCE";];
    5 -> 6 [label = "\"+\", \"-\" | LA";];
    5 -> eN3 [label = "Otro | -4"; style = dashed;];
    6 -> 7 [label = "d | LA";];
    6 -> eN4 [label = "Otro | -5"; style = dashed;];
    7 -> 7 [label = "d | LA";];
    7 -> fN4 [label = "Otro | FC, VTF, RCE";];
    8 -> 8 [label = "Otro | LA";];
    8 -> eS [label = "n | -7"; style = dashed;];
    8 -> fS [label = "\" | LA, VTF";];
    9 -> 9 [label = "l | LA";];
    9 -> fR [label = "Otro | FTF, RCE";];
    10 -> 10 [label = "L, d, \"%\" | LP";];
    10 -> fI [label = "Otro | ILC, VTF, RCE";];
    11 -> eP [label = "Otro | -6"; style = dashed;];
    11 -> fP2 [label = "\"=\" | LA, FTF";];
    12 -> fP3 [label = "\"=\", \"!\" | LA, FTF";];
    12 -> fP3 [label = "Otro | FTF, RCE";];
    13 -> fP4 [label = "\">\" | LA, FTF";];
    13 -> fP4 [label = "Otro | FTF, RCE";];
    14 -> fP5 [label = "\"=\" | LA, FTF";];
    14 -> fP5 [label = "Otro | FTF, RCE";];
    15 -> 16 [label = "\"#\"";];
    15 -> eC [label = "Otro | -8"; style = dashed;];
    16 -> 16 [label = "Otro, n [NLD]";];
    16 -> 17 [label = "\"#\"";];
    17 -> 0 [label = "\"#\"";];
    17 -> 16 [label = "Otro, n [NLD]";];
}
